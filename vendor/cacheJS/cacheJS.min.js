/*! cacheJS 21-06-2016 */
!function(a,b){"use strict";var c=function(){var a="localStorage";return{init:function(a){this.localStorageProvider=new e(a),this.arrayProvider=new f(a)},use:function(b){a=b},getProvider:function(b){var c=b||a;switch(c){case"localStorage":return this.localStorageProvider;case"array":return this.arrayProvider}}}},d=function(){var a={prefix:"_cache",ttl:604800},b={cacheAdded:[],cacheRemoved:[]},d={generateKey:function(b){var c=a.prefix+"_",d=[];for(var e in b)b.hasOwnProperty(e)&&d.push(e);d.sort();for(var f=0;f<d.length;f++)c+=d[f]+"_"+b[d[f]],f!==d.length-1&&(c+="__");return c},generateContextKey:function(b,c){return a.prefix+"_context_"+b+"_"+c},getCurrentTime:function(){var a=(new Date).getTime();return Math.floor(a/1e3)},getDefault:function(){return a},getEventSubscribers:function(){return b},dispatchEvent:function(a,c){var e=b[a];if(!(e.length<1))for(var f=0;f<e.length;f++)"undefined"!=typeof e[f]&&d.isFunction(e[f])&&e[f](c)},isFunction:function(a){return"[object Function]"==Object.prototype.toString.call(a)}},e=new c;return e.init(d),{use:function(a){return e.use(a),this},get:function(a){return e.getProvider().get(a)},set:function(a,b,c,d){try{e.getProvider().set(a,b,c,d)}catch(f){return null}return this},setPrefix:function(b){return a.prefix=b,this},getPrefix:function(){return a.prefix},removeByKey:function(a){return e.getProvider().removeByKey(a),this},removeByContext:function(a){return e.getProvider().removeByContext(a),this},on:function(a,c){b[a].push(c)},unsubscribe:function(a,c){for(var d=b[a],e=0;e<d.length;e++)if(d[e]===c){delete d[e];break}}}},e=function(a){return{get:function(b){var c=a.generateKey(b),d=localStorage.getItem(c);return null!==d?(d=JSON.parse(d),a.getCurrentTime()-d.createdAt>=d.ttl?(localStorage.removeItem(c),null):d.data):null},set:function(b,c,d,e){d=d||a.getDefault().ttl;var f=a.generateKey(b);localStorage.setItem(f,JSON.stringify({data:c,ttl:d,createdAt:a.getCurrentTime()}));for(var g in e)if(e.hasOwnProperty(g)){var h=a.generateContextKey(g,e[g]),i=localStorage.getItem(h);if(null!==i){i=JSON.parse(i);var j=!1;if(Array.prototype.indexOf)j=i.indexOf(f)>=0;else for(var k=0;k<i.length;k++)if(i[k]==f){j=!0;break}j||i.push(f)}else i=[f];localStorage.setItem(h,JSON.stringify(i))}a.dispatchEvent("cacheAdded",{key:b,value:c,ttl:d,contexts:e||null})},removeByKey:function(b){var c=a.generateKey(b),d=localStorage.getItem(c);null!==d&&(d=JSON.parse(d),localStorage.removeItem(c),a.dispatchEvent("cacheRemoved",{generatedKey:c,value:d.data,ttl:d.ttl}))},removeByContext:function(b){for(var c in b)if(b.hasOwnProperty(c)){var d=a.generateContextKey(c,b[c]),e=localStorage.getItem(d);if(null===e)return;for(var f=JSON.parse(e),g=0;g<f.length;g++){var h=JSON.parse(localStorage.getItem(f[g]));localStorage.removeItem(f[g]),a.dispatchEvent("cacheRemoved",{generatedKey:f[g],value:h.data,ttl:h.ttl})}localStorage.removeItem(d)}}}},f=function(a){var b={},c={};return{get:function(c){var d=a.generateKey(c);if(b.hasOwnProperty(d)){var e=b[d];return a.getCurrentTime()-e.createdAt>=e.ttl?(delete b[d],null):e.data}return null},set:function(d,e,f,g){var h=a.generateKey(d);f=null===f||"undefined"==typeof f?a.getDefault().ttl:f,b[h]={data:e,ttl:f,createdAt:a.getCurrentTime()};for(var i in g)if(g.hasOwnProperty(i)){var j=a.generateContextKey(i,g[i]),k=c.hasOwnProperty(j)?c[j]:null;if(null!==k){var l=!1;if(Array.prototype.indexOf)l=k.indexOf(h)>=0;else for(var m=0;m<k.length;m++)if(k[m]==h){l=!0;break}l||k.push(h)}else k=[h];c[j]=k}a.dispatchEvent("cacheAdded",{key:d,value:e,ttl:f,contexts:g||null})},removeByKey:function(c){var d=a.generateKey(c);if(b.hasOwnProperty(d)){var e=b[d];delete b[d],a.dispatchEvent("cacheRemoved",{generatedKey:d,value:e.data,ttl:e.ttl})}},removeByContext:function(d){for(var e in d)if(d.hasOwnProperty(e)){var f=a.generateContextKey(e,d[e]),g=c.hasOwnProperty(f)?c[f]:null;if(null===g)return;for(var h=0;h<g.length;h++){var i=b[g[h]];delete b[g[h]],a.dispatchEvent("cacheRemoved",{generatedKey:g[h],value:i.data,ttl:i.ttl})}delete c[f]}}}};d.VERSION="1.1.2",a.cacheJS=new d}(this);